import{r as m,P as i,i as n,j as a,t as h,k as l,S as c,s as p}from"./index-1chCkVik.js";import{c as f}from"./index-BTGpsw6g.js";import{A as g}from"./AdminLayout-D47KXwPI.js";import{R as u}from"./RenderAttachment-CCUylxti.js";import{T as w}from"./Table-DumLROg3.js";import{a as N,B as x}from"./Menu-PGS1KhgP.js";import{A as C}from"./Avatar-BdPrWYVU.js";import"./IconButton-BinniJZF.js";import"./Modal-hu0AyHgC.js";import"./Typography-gYzn-N8Q.js";import"./ExitToApp-CVG3SFKD.js";import"./Container-C-BQW1q2.js";import"./TextField-CqvKc0RW.js";import"./isMuiElement-CgvdYgho.js";import"./Menu-BaTIauzb.js";import"./Tooltip-DnVxIlfV.js";import"./Toolbar-CRnfIr8i.js";import"./MenuItem-CMl7zzIZ.js";import"./Button-Cxc8TQoW.js";import"./InputAdornment-DkvClCcW.js";import"./CircularProgress-fZHlol2e.js";const b=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:r=>{const{attachments:e}=r.row;return(e==null?void 0:e.length)>0?e.map(t=>{const s=t.url,d=l(s);return a.jsx(x,{children:a.jsx("a",{href:s,download:!0,target:"_blank",style:{color:"black"},children:u(d,s)},t)},t)}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:r=>a.jsxs(c,{direction:"row",spacing:"1rem",alignItems:"center",children:[a.jsx(C,{alt:r.row.sender.name,src:r.row.sender.avatar}),a.jsx("span",{children:r.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],q=()=>{const{loading:r,data:e,error:t}=f(`${p}/api/v1/admin/messages`,"dashboard-messages");N([{isError:t,error:t}]);const[s,d]=m.useState([]);return m.useEffect(()=>{e&&d(e.messages.map(o=>({...o,id:o._id,sender:{name:o.sender.name,avatar:i(o.sender.avatar,50)},createdAt:n(o.createdAt).format("MMMM Do YYYY, h:mm:ss a")})))},[e]),a.jsx(g,{children:r?a.jsx(h,{height:"100vh"}):a.jsx(w,{heading:"All Messages",columns:b,rows:s,rowHeight:200})})};export{q as default};
